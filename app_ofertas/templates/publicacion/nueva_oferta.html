{% extends "esquema.html" %}

{% block title %} Nueva Oferta {% endblock %}


{% block content %}

<div class="row">

	<form method="POST"  enctype="multipart/form-data">
	    
	    <p>Completa los datos para publicar tu oferta</p>

	    {% csrf_token %}  

	    <div class="row">
	    	<div class="col s12 m3 l2 cajaimagenform">
	
				{{ form.imagen.errors }}
				{{ form.imagen.label_tag }}
				{{ form.imagen }}
				<label id="image-preview-area" for="id_imagen"  class="simil-btn-add-img">
					<i class="material-icons">add_a_photo</i>	
				</label>
	    	</div>
	    	<div class="col s12 m9 l10">
	    		<div class="row">
	    			<div class=" col s12 m6 l4">		
							<label>
								{{ form.rubro.errors }}
								{{ form.rubro.label_tag }}
								{{ form.rubro }}
							</label>
						</div>
						<div class=" col s12 m6 l8">		
							<label>
								{{ form.titulo.errors }}
								{{ form.titulo.label_tag }}
								{{ form.titulo }}
							</label>
						</div>
						<div class="col s12">
							<label>
								{{ form.detalle.errors }}
								{{ form.detalle.label_tag }}
								{{ form.detalle }}
							</label>
						</div>
						<div class="col s6">
							<label>
								{{ form.precio_regular.errors }}
								{{ form.precio_regular.label_tag }}
								{{ form.precio_regular }}
							</label>
						</div>
						<div class="col s6">
							<label>
								{{ form.precio_oferta.errors }}
								{{ form.precio_oferta.label_tag }}
								{{ form.precio_oferta }}
							</label>
						</div>
						{% if messages %}
							<ul>
							{% for message in messages %}
								<li> {{ message }}</li>
							{% endfor %}
							</ul>
						{% endif %}							
	    		</div>
	    	</div>
	    </div>

    <div class="row center-align">
		 	<button class="btn-large waves-effect waves-light" type="submit" name="action" value="Guardar">Guardar
				<i class="material-icons right">save</i>
			</button>
    </div>
	</form>
</div>

{% endblock %}

{% block script %}
<script type="text/javascript">
document.addEventListener('DOMContentLoaded', function() {
    var elems = document.querySelectorAll('select');
    var instances = M.FormSelect.init(elems);
  });
</script>
<script type="text/javascript">
	    function readFile(input) {
	        if (input.files && input.files[0]) {
	            var reader = new FileReader();
	 
	            reader.onload = function (e) {
	                var imagePreview = document.createElement('img');
	                imagePreview.id = 'image-preview';
	                
	                imagePreview.src = e.target.result;
	 
	                var previewArea = document.getElementById('image-preview-area');

									while(previewArea.firstChild) {
											previewArea.removeChild(previewArea.firstChild);
										}                
									imagePreview.style.width = "200px;"
	                previewArea.appendChild(imagePreview);
	            }
	 
	            reader.readAsDataURL(input.files[0]);
	        }
	    }
	 
	    var imageUpload = document.getElementById('id_imagen');
	    imageUpload.onchange = function (e) {
	        readFile(e.srcElement);
	    }	
</script>
{% endblock %}